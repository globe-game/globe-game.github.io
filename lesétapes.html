<!DOCTYPE html>

<html lang="fr">

	<head>
		<meta charset="utf-8">
		<title>Les étapes</title>
		<link rel="stylesheet" href="style.css">
		<script type="text/javascript" src="monscript.js"></script>
		<link rel="stylesheet" media="handheld, only screen and (max-device-width: 1150px)" type="text/css" href="mobile.css" />
	</head>

	<body>

		<header>
			<p><a href="index.html">Accueil</a> &emsp; <a href="leprojet.html">Projet</a> &emsp; <a href="membres.html">Membres</a> &emsp; <a href="lesétapes.html">Étapes</a> &emsp; <a href="download.html">Télécharger</a></p>
		</header>

		<main>

		<br>
		<br>

		<h1>Les différentes étapes de la conception de G.L.O.B.E.</h1>

		<p>Un jeu, ça ne se fait pas en une heure.</p>
		<p>Alors pour mieux comprendre comment est fait le jeu, voici un récapitulatif des étapes de sa conception.</p>
		<br>
		<h2>L'idée d'un jeu de course</h2>
		<p>Pour ce projet, le groupe ne s'est pas formé de façon logique. Satya et Vincent étaient déjà ensemble, et ont rejoint le groupe formé par Sami et Hugo.</p>
		<p>En effet, Hugo avait déjà l'idée d'un jeu de course 3D, et s'était tourné vers Sami. L'idée a bien plu à Vincent et Satya, nous étions lancés.</p>
		<p>Nous avons ensuite connu notre première divergence : jeu cartoon type Mario Kart, ou jeu futuriste type F-Zero ?</p>
		<p>Après concertation des membres, il a été décidé de partir sur la première option, afin de se laisser plus de possibilités fantaisistes durant le développement.</p>
		<p>Au final, le jeu est plus un hybride des deux dans sa physique.</p>
		<br>
		<h2>Premiers pas sur Unity, premiers problèmes de physique</h2>

		<p>Pour développer le jeu, nous avions le choix entre deux moteurs : Unity et Godot.</p>
		<p>Nous nous sommes instantanément tournés vers Unity, en raison de l'incroyable documentation dont il bénificie sur internet (blogs, forums, tutos vidéo).</p>
		<p>Ceci décidé, nous pouvions passer au développement du jeu.</p>
		<p>La première chose dans un jeu de course, c'est la voiture. Et une voiture, ça roule.</p>
		<p>Nous nous sommes donc entraînés à créer des scripts de déplacement, en utilisant des voitures trouvées sur internet.</p>
		<p>Nos premières difficultés furent donc de faire tourner le véhicule, ainsi que la caméra.</p>
		<p>Nous avons ensuite voulu adapter notre script aux wheel colliders, là où avant les véhicules étaient conçus et se déplaçaient en un seul bloc.</p>
		<p>Une autre idée était de mettre en place un système de boîte de vitesses.</p>
		<p>Néanmoins, après la soutenance 2, nous avons jugé que ceci était inutile, nous sommes donc revenus à un script plus simple.</p>
		<br>
		<h2>La conception des véhicules</h2>
		<p>Toujours pour sa documentation fournie, notre choix a vite été Blender quant à la conception des véhicules et autres modèles 3D.</p>
		<p>Ne connaissant absolument rien du logiciel, il fut assez long de finaliser le premier véhicule : Espada.</p>
		<p>Le camion Chouf a été réalisée de la même façon.</p>
		<p>Le grand-bi François fut compliqué à finaliser, à cause de son impressionnant nombre de pièces.</p>
		<p>Au final, nous n'avons pas réussi à le faire rouler, et nous avons dû l'abandonner.</p>
		<p>Pour le remplacer, nous avons choisi Alabama, une voiture de racing trouvée dans un asset gratuit sur internet.</p>
		<br>
		<h2>La conception des circuits</h2>
		<p>Avoir des véhicules c'est bien, encore faut-il qu'ils aient quelque part où rouler.</p>
		<p>La conception des circuits ne fut pas de tout repos.</p>
		<p>Notre première intention était de créer du relief puis d'ajouter une route grâce à l'asset Easyrods3d.</p>
		<p>Au final, nous avons décidé que la route serait justement formée avec le relief et le décor.</p>
		<p>Le plus long fut de doser le relief pour rendre la route praticable, et de poser tous les modèles 3D du décor ainsi que leurs textures.</p>
		<p>Au final, nous avons réalisé trois circuits : Dio dans le désert, Ice Age dans la neige, et Poke dans l'herbe et la roche.</p>
		<br>

		<h2>Les menus</h2>
		<p>Quand vous démarrez un jeu de course, apparaissez-vous déjà au volant ? Bien sûr que non !</p>
		<p>Pour faire les menus, nous avons utilisé l'objet "Canvas" d'Unity, sur lequel nous apposé boutons et autres textes les uns après les autres.</p>
		<p>Il fallait bien positionner la hitbox des boutons par rapport aux textes, faire apparaître les bons menus au bon moment, et passer d'une scène à l'autre grâce à ces menus.</p>
		<p>Le jeu possède un menu principal, un menu de sélection du véhicule, un menu de sélection du circuit, un menu du multijoueurs et un menu pause.</p>
		<p>Mais une fois que le système a été compris, faire tous ces menus ne s'est pas avéré si compliqué que ça.</p>

		<br>
		<h2>L'intelligence artificielle</h2>
		<p>Le joueur ne va quand même pas être seul sur le circuit ! Mario Kart peut-être, F-Zero peut-être, mais pas Trackmania.</p>
		<p>Il y a deux aspects importants de l'IA : la trajectoire du véhicule et la gestion des obstacles.</p>
		<p>Il ne faut pas que la voiture se bloque contre un cactus sur la route, mais il ne faut pas non plus que le véhicule parte dans le décor.</p>
		<p>La voiture suit un "chemin", une liste de nodes reliés entre eux.</p>
		<p>Après avoir atteint un node, le véhicule se dirige seul vers le suivant.</p>
		<p>L'étape la plus longue ne fut pas tant de placer les nodes que de faire des tests, encore et encore, et ajuster la vitesse des véhicules, le placement des nodes ou carrément le circuit, quand une IA se bloquait dans le décor, se retournait ou rentrait dans une autre.</p>
		<br>

		<h2>Le multijoueurs</h2>
		<p>Un bon jeu de course se doit d'avoir un bon multijoueurs, pour s'affronter entre amis ou prouver au monde entier qu'on est le meilleur.</p>
		<p>Le multioueurs est géré par l'asset Photon 2, qui accepte jusqu'à 20 joueurs connectés simultanément.</p>
		<p>La première difficulté fut donc d'appréhender les nouvelles fonctions associées à Photon.</p>
		<p>Pour que plusieurs courses puissent avoir lieu en même temps, il a fallu gérer la création de "rooms".</p>
		<p>Après avoir fait les menus nécessaires pour créer et rejoindre des rooms, il a fallu faire apparaître les joueurs sur le circuit.</p>
		<p>Le problème le plus compliqué à régler de cette partie fut que l'apparition des véhicules sur les points de spawn était gérée aléatoirement, causant parfois l'apparition de deux véhicules l'un sur l'autre.</p>
		<p>Ce problème a été réglé grâce à l'actor number, une fonctionnalité de Photon qui attribue un nombre à chaque joueur, 1 pour le créateur de la room, puis 2, 3, etc.</p>
		<p>Permettre de choisir le circuit ne fut pas compliqué, il a simplement fallu ajouter des points d'apparition sur les deux autres circuits.</p>

		<br>

		<h2>Reset, compte à rebours et ligne d'arrivée</h2>
		<p>En appuyant sur la touche R, le joueur peut revenir au point d'apparition, au départ du circuit.</p>
		<p>Cette fonctionnalité fut facile à implémenter en mode solo, il suffisait de changer la position et la rotation de la voiture pour celles du point d'apparition.</p>
		<p>Par contre, en multijoueurs, pour une question de synchronisation, il a fallu détruire le gameobject du joueur et en recréer un au point de spawn.</p>
		<br>
		<p>Le compte à rebours fut très simple à implémenter. Un canvas comporte 4 textes, "3", "2", "1", et "GO".</p>
		<p>Un script affiche chaque texte dans l'ordre, avec un délai d'une seconde entre chaque texte.</p>
		<br>
		<p>Pour la ligne d’arrivée, ce fut bien plus compliqué.</p>
		<p>Pour détecter les véhicules, un collider a été mis sur la ligne d’arrivée.</p>
		<p>Mais il détectait aussi ceux des roues, il a donc fallu faire en sorte qu’il ne détecte que les box colliders.</p>
		<p>À chaque contact, un script faisait augmenter une variable qui allait faire afficher le bon texte une fois le joueur arrivé.</p>
		<p>Pour détecter le joueur, nous avons utilisé les tags, en attribuant le tag "Terrain" au véhicule du joueur.</p>
		<p>Pour le mode multijoueurs, pas besoin de différencier les IA du joueur.</p>
		<p>Dès qu'un joueur a franchi la ligne d'arrivée, un message "Le 1e est arrivé !" apparaît pour tous les joueurs, puis "Le 2e est arrivé !", etc.</p>
		<br>

		<p class='fren'><a href="index.html">Retour</a></p>
		<br>
		
		<p class='fren'><a href="lesétapes.html">fr</a> &emsp; <a href="thesteps.html"> en</a></p>
		<br>
		</main>

		<footer>
 		<img src="https://i.imgur.com/x4WMD2W.png" alt="Globe logo" width=13% height=13% class='picture-left'>
 		<a href="https://epita.fr" target="_blank"><img src="https://i.imgur.com/etgc0R5.png" alt="Epita logo" width=20% height=20% class='picture-right'></a>
 		<div class='bloc' class='blocgauche'>
 		
 		<h4>Nous contacter</h4>
 		<p><a href="mailto:elite4.contact@gmail.com" target="_blank">Mail</a></p>
 		<p><a href="https://www.linkedin.com/in/sami-janati-76387020b/" target="_blank">Linkedin</a></p>
 		<p><a href="https://twitter.com/sami_janati" target="_blank">Twitter</a></p>
 		<p><a href="https://www.instagram.com/5amijanati/" target="_blank">Instagram</a></p>
 		</div>
 		<div class='bloc' class='blocdroit'>
 		
 		<h4>Liens utiles</h4>
 		<p><a href="https://unity.com/fr" target="_blank">Unity</a></p>
 		<p><a href="https://www.blender.org/" target="_blank">Blender</a></p>
 		<p><a href="http://gitextensions.github.io/" target="_blank">Git Extensions</a></p>
 		
 		<br>
 		</div>
 		

		</footer>



	</body>

</html>
